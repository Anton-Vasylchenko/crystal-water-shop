(this["webpackJsonpfrontend-water"]=this["webpackJsonpfrontend-water"]||[]).push([[6],{204:function(e,t,a){},205:function(e,t){const a=e=>void 0===e,s=e=>Array.isArray(e),c=e=>e&&"number"===typeof e.size&&"string"===typeof e.type&&"function"===typeof e.slice,n=(e,t,r,l)=>((t=t||{}).indices=!a(t.indices)&&t.indices,t.nullsAsUndefineds=!a(t.nullsAsUndefineds)&&t.nullsAsUndefineds,t.booleansAsIntegers=!a(t.booleansAsIntegers)&&t.booleansAsIntegers,t.allowEmptyArrays=!a(t.allowEmptyArrays)&&t.allowEmptyArrays,r=r||new FormData,a(e)||(null===e?t.nullsAsUndefineds||r.append(l,""):(e=>"boolean"===typeof e)(e)?t.booleansAsIntegers?r.append(l,e?1:0):r.append(l,e):s(e)?e.length?e.forEach(((e,a)=>{const s=l+"["+(t.indices?a:"")+"]";n(e,t,r,s)})):t.allowEmptyArrays&&r.append(l+"[]",""):(e=>e instanceof Date)(e)?r.append(l,e.toISOString()):!(e=>e===Object(e))(e)||(e=>c(e)&&"string"===typeof e.name&&("object"===typeof e.lastModifiedDate||"number"===typeof e.lastModified))(e)||c(e)?r.append(l,e):Object.keys(e).forEach((a=>{const c=e[a];if(s(c))for(;a.length>2&&a.lastIndexOf("[]")===a.length-2;)a=a.substring(0,a.length-2);n(c,t,r,l?l+"["+a+"]":a)}))),r);e.exports={serialize:n}},206:function(e,t,a){},207:function(e,t,a){},216:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a.n(s),n=a(7),r=a(18),l=a(11),i=(a(204),a(38)),o=a(4),j=a(0);var d=e=>{const{item:t,count:a,totalPrice:s,onDeleteItem:n,onPlus:r,onMinus:d}=e,{id:b,img:m,name:h}=t,[O,p]=c.a.useState(!1),x=()=>{p(!O)};return Object(j.jsxs)("li",{className:"cart-item ",children:[Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{className:"col-md-6 d-flex align-items-center",children:[Object(j.jsx)("div",{className:"cart-item__img",children:Object(j.jsx)("img",{src:"".concat(o.b.PRODUCTS).concat(m),alt:"item"})}),Object(j.jsx)("div",{className:"cart-item__info",children:Object(j.jsx)(l.b,{to:"/shop/".concat(b),children:Object(j.jsx)("h3",{children:h})})})]}),Object(j.jsxs)("div",{className:"col-md-6 d-flex bottom-item-mobile align-items-center",children:[Object(j.jsxs)("div",{className:"cart-item__count",children:[Object(j.jsx)("div",{onClick:()=>{d(b)},className:"cart-item__btn unselectable-text",children:"-"}),Object(j.jsx)("span",{children:a}),Object(j.jsx)("div",{onClick:()=>{r(t)},className:"cart-item__btn unselectable-text",children:"+"})]}),Object(j.jsxs)("div",{className:"cart-item__price",children:[s," \u20b4"]}),Object(j.jsx)("div",{className:"cart-item__del",children:Object(j.jsx)("div",{className:"cart-item__btn btn_del unselectable-text",onClick:x,children:"x"})})]})]}),Object(j.jsx)(i.a,{show:O,handleNo:x,handleYes:()=>{n(b),p(!O)},title:'\u0412\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u044f: "'.concat(h,'"'),body:'\u0412\u0438 \u0434\u0456\u0439\u0441\u043d\u043e \u0431\u0430\u0436\u0430\u0454\u0442\u0435 \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0437 \u043a\u043e\u0448\u0438\u043a\u0430 "'.concat(h,'"?')})]})},b=a(10),m=a(188),h=a(186),O=a(189),p=a(101),x=a(98),u=a(14);var g=a(24),f=a(48),y=a(205);a(206);var v=function(){const e=Object(n.b)(),[t,a]=Object(s.useState)(!1),[r,l]=Object(s.useState)(!1),[o,d]=c.a.useState(!1),[v,w]=c.a.useState(!1),{items:N}=Object(n.c)((({cart:e})=>e)),{id:C,isAuth:_,name:k,email:A,phone:P}=Object(n.c)((({user:e})=>e)),[S,I]=Object(s.useState)(""),[E,D]=Object(s.useState)(""),[T,R]=Object(s.useState)(""),[U,Y]=Object(s.useState)(""),[z,G]=c.a.useState({name:!0,phone:!0,email:!0,password:!0});Object(s.useEffect)((()=>{I(k),D(P),Y(A)}),[k,P,A]);const L=()=>{d(!1),G({name:!0,phone:!0,email:!0,password:!0}),a(!1)},M=async()=>{let a=C;const s={name:S,email:U,password:T,phone:E};if(t)try{await Object(g.g)(s.email,s.password,s.name,s.phone).then((t=>{e(Object(b.q)(t)),e(Object(b.l)(!0)),a=t.id}))}catch(c){return!1}try{const e={};for(let t in N)e[t]={...N[t][0]},e[t].count=N[t].length,e[t].userId=a,e[t].userName=S,e[t].userEmail=U,e[t].userPhone=E;(async e=>{const{data:t}=await u.b.post("api/order/",e)})(Object(y.serialize)(e))}catch(c){alert(c.response.data.message)}};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"cart-bottom__buy-btn unselectable-text",onClick:()=>{d(!0)},children:"\u0417\u0430\u043c\u043e\u0432\u0438\u0442\u0438"}),v&&Object(j.jsx)(i.a,{show:v,handleYes:()=>{w(!1),e(Object(b.b)())},title:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e!",body:"\u0414\u044f\u043a\u0443\u0454\u043c\u043e \u0437\u0430 \u0432\u0430\u0448\u0435 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f. \u041e\u0447\u0456\u043a\u0443\u0439\u0442\u0435 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u043e\u0433\u043e \u0434\u0437\u0432\u0456\u043d\u043a\u0430 \u0434\u043b\u044f \u0443\u0442\u043e\u0447\u043d\u0435\u043d\u043d\u044f \u0434\u0435\u0442\u0430\u043b\u0435\u0439."}),Object(j.jsx)("div",{onClick:e=>e.stopPropagation(),children:Object(j.jsxs)(m.a,{size:"lg",animation:!0,show:o,onHide:L,children:[Object(j.jsx)(m.a.Header,{closeButton:!0,children:Object(j.jsx)(m.a.Title,{children:" \u041e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u043d\u044f \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f "})}),r&&Object(j.jsx)(h.a,{variant:"danger",className:"m-2",children:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447 \u0437 \u0434\u0430\u043d\u043e\u044e \u043f\u043e\u0448\u0442\u043e\u0432\u043e\u044e \u0441\u043a\u0440\u0438\u043d\u044c\u043a\u043e\u044e \u0432\u0436\u0435 \u0456\u0441\u043d\u0443\u0454"}),Object(j.jsx)(m.a.Body,{children:Object(j.jsxs)(O.a,{children:[Object(j.jsxs)(O.a.Row,{children:[Object(j.jsxs)(O.a.Group,{as:p.a,controlId:"name",children:[Object(j.jsx)(O.a.Label,{children:"\u041f\u0440\u0456\u0437\u0432\u0438\u0449\u0435 \u0442\u0430 \u0456\u043c'\u044f"}),Object(j.jsx)(O.a.Control,{type:"text",value:S,onChange:e=>{G((e=>({...e,name:!0}))),I(e.target.value)},placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0430\u0448\u0435 \u043f\u0440\u0456\u0437\u0432\u0438\u0449\u0435 \u0442\u0430 \u0456\u043c'\u044f"})]}),!z.name&&Object(j.jsx)(h.a,{className:"error-msg",variant:"danger",children:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430! \u0412\u0438 \u043d\u0435 \u0432\u0432\u0435\u043b\u0438 \u0432\u0430\u0448\u0435 \u0456\u043c'\u044f"})]}),Object(j.jsx)("br",{}),Object(j.jsx)(O.a.Row,{children:Object(j.jsxs)(O.a.Group,{as:p.a,controlId:"phone",children:[Object(j.jsx)(O.a.Label,{children:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443"}),Object(j.jsx)(O.a.Control,{type:"number",onChange:e=>{G((e=>({...e,phone:!0}))),D(e.target.value)},value:E||"",placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0430\u0448 \u043c\u043e\u0431\u0456\u043b\u044c\u043d\u0438\u0439 \u043d\u043e\u043c\u0435\u0440"}),!z.phone&&Object(j.jsx)(h.a,{className:"error-msg",variant:"danger",children:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430! \u0412\u0438 \u043d\u0435 \u0432\u0432\u0435\u043b\u0438 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443"})]})}),Object(j.jsx)("br",{}),Object(j.jsx)(O.a.Row,{children:Object(j.jsxs)(O.a.Group,{as:p.a,controlId:"email",children:[Object(j.jsx)(O.a.Label,{children:"\u0415\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430 \u0441\u043a\u0440\u0438\u043d\u044c\u043a\u0430"}),Object(j.jsx)(O.a.Control,{type:"text",onChange:e=>{G((e=>({...e,email:!0}))),l(!1),Y(e.target.value)},value:U,placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0430\u0448 email"}),!z.email&&Object(j.jsx)(h.a,{className:"error-msg",variant:"danger",children:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430! \u041f\u043e\u0448\u0442\u043e\u0432\u0430 \u0441\u043a\u0440\u0438\u043d\u044c\u043a\u0430 \u043d\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0430"})]})}),Object(j.jsx)("br",{}),!_&&Object(j.jsx)(O.a.Check,{type:"checkbox",id:"default-checkbox",label:"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044f",onChange:e=>{a(e.target.checked)}}),t&&Object(j.jsx)("div",{className:"registration-section",children:Object(j.jsx)(O.a.Row,{children:Object(j.jsxs)(O.a.Group,{as:p.a,controlId:"password",children:[Object(j.jsx)(O.a.Label,{children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(j.jsx)(O.a.Control,{type:"password",onChange:e=>{G((e=>({...e,password:!0}))),R(e.target.value)},value:T,placeholder:"\u041f\u0440\u0438\u0434\u0443\u043c\u0430\u0439\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}),!z.password&&Object(j.jsx)(h.a,{className:"error-msg",variant:"danger",children:"\u041f\u0430\u0440\u043e\u043b\u044c \u043f\u043e\u0432\u0438\u043d\u0435\u043d \u043d\u0430\u043b\u0456\u0447\u0443\u0432\u0430\u0442\u0438 \u043d\u0435 \u043c\u0435\u043d\u0448\u0435 5 \u0441\u0438\u043c\u0432\u043e\u043b\u0456\u0432"})]})})}),Object(j.jsx)("hr",{}),Object(j.jsx)(x.a,{variant:"secondary",onClick:L,children:"\u0412\u0456\u0434\u043c\u0456\u043d\u0438\u0442\u0438"}),Object(j.jsx)(x.a,{className:"m-2",variant:"primary",id:"btn",type:"button",onClick:async e=>{const a={name:S,phone:E,email:U,password:t?T:""},s={name:!Object(f.b)(a.name),phone:!Object(f.b)(a.phone),email:!Object(f.a)(a.email),password:!t||Object(f.c)(a.password)};G({...s}),!Object.values(s).includes(!1)&&M().then((e=>{!1!==e?(L(),w(!0)):l(!0)}))},children:"\u041a\u0443\u043f\u0438\u0442\u0438"})]})})]})})]})},w=a.p+"static/media/trash-icon.49eafd40.png",N=a.p+"static/media/cart-is-empty.6f0349a5.png";a(207);const C=e=>{const{items:t,showPopup:a,onToggleClearCartPopup:s,onClickYes:n,totalCount:r,totalPrice:l}=e;return Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(i.a,{handleNo:s,handleYes:n,show:a,title:"\u041a\u043e\u0448\u0438\u043a",body:"\u0412\u0438 \u0434\u0456\u0439\u0441\u043d\u043e \u0431\u0430\u0436\u0430\u0454\u0442\u0435 \u043e\u0447\u0438\u0441\u0442\u0438\u0442\u0438 \u043a\u043e\u0448\u0438\u043a?"}),Object(j.jsx)("div",{className:"cart-top",children:Object(j.jsxs)("div",{onClick:s,className:"cart-top__clear-btn unselectable-text",children:[Object(j.jsx)("img",{src:w,alt:"trash-icon"}),"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u0438 \u043a\u043e\u0448\u0438\u043a"]})}),Object(j.jsx)("ul",{children:t}),Object(j.jsxs)("div",{className:"cart-bottom",children:[Object(j.jsxs)("div",{className:"cart-bottom__info",children:[Object(j.jsxs)("div",{className:"cart-bottom__items-counts",children:["\u0412\u0441\u044c\u043e\u0433\u043e \u0442\u043e\u0432\u0430\u0440\u0456\u0432: ",Object(j.jsxs)("span",{children:[r," \u0448\u0442."]})]}),Object(j.jsxs)("div",{className:"cart-bottom__total-price",children:["\u0421\u0443\u043c\u0430 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f: ",Object(j.jsxs)("span",{children:[l," \u20b4"]})]})]}),Object(j.jsx)(v,{})]})]})};t.default=function(){const e=Object(n.b)(),{totalPrice:t,totalCount:a,items:s,itemTotalCount:l,itemTotalPrice:i}=Object(n.c)((({cart:e})=>e)),[o,m]=c.a.useState(!1),h=t=>{e(Object(b.j)(t))},O=t=>{e(Object(b.a)(t))},p=t=>{l[t]>1&&e(Object(b.i)(t))},x=Object.keys(s).map((e=>s[e][0])).map((e=>{const t=e.id;return Object(j.jsx)(d,{item:e,count:l[t],totalPrice:i[t],onDeleteItem:h,onMinus:p,onPlus:O},t)}));return Object(j.jsx)(r.a,{title:"\u041a\u043e\u0448\u0438\u043a",backArrow:!0,children:a?Object(j.jsx)(C,{items:x,onToggleClearCartPopup:()=>{m((e=>!e))},onClickYes:()=>{e(Object(b.b)()),m(!o)},totalCount:a,totalPrice:t,showPopup:o}):Object(j.jsxs)("h3",{className:"text-center text-secondary jumbotron jumbotron-fluid",children:[Object(j.jsx)("img",{className:"empty-cart-img",src:N,alt:"cart is empty"}),Object(j.jsx)("p",{children:"\u0412\u0430\u0448 \u043a\u043e\u0448\u0438\u043a \u043f\u043e\u0440\u043e\u0436\u043d\u0456\u0439 :( "})]})})}}}]);
//# sourceMappingURL=6.350456d5.chunk.js.map